/* This file is autogenerated by grm -- do not edit. */

#ifndef UNITY_INCLUDE_CONFIG_H
#error "Must define UNITY_INCLUDE_CONFIG_H."
#endif

/*** Standard includes. ***/
#include <stdint.h>
#include <stdbool.h>
#include <string.h>
#include <stdlib.h>

#include "unity.h"


/*** Stuff copied from test files (should be #include's, declarations & macros only) ***/
//#include "testOne.h"
enum { // Error codes...
	ERR_OK, 		// No error.
	ERR_MEM,		// access out of memory space. 
	ERR_HALT,		// HALT instruction.
	ERR_FAULT,		// FAULT instruction.
	ERR_VAL,
	ERR_BAD_OPCODE,	
	ERR_BAD_IP,		// IP outside of memory space.
	
};

enum { // Instructions...
	OP_HALT,	// Halt execution, return ERR_HALT.
	OP_FAULT,	// Generates error ERR_FAULT.
	OP_INC,		// Increments val.
	OP_X,		// Sets error ERR_VAL is val is odd, else adds 10 to it.
	OP_LIT,		// Loads next value into val, but sets error ERR_MEM if value is odd.
};

/*** External test functions scraped from test files. ***/
void testInitContext(void);
void testStackInit(void);
void testStackPopPush(void);
void testStackReset(void);
void testStackPeek(void);
void testStackTosNos(void);
void testStackCanPop(void);
void testStackCanPush(void);
void testErrorPop(void);
void testErrorPush(void);
void testErrorTos(void);
void testErrorNos(void);
void testErrorPeek(void);
void testVmRunNone();
void testVmErrorOp(uint8_t op, uint8_t err);
void testInc();
void testInc2();
void testLiteral();
void testOverrun1();
void testOverrun2();

/*** Fixture & dump functions from test files. ***/
void ts_SetupStackTestContext(void);
void ts_DestroyStackTestContext(void);
void vmInit(void);

/* Declare test stubs. */
static void testVmErrorOp_stub_0(void) { testVmErrorOp(OP_HALT, ERR_HALT); }
static void testVmErrorOp_stub_1(void) { testVmErrorOp(OP_FAULT, ERR_FAULT); }

/*** Extra Unity support. ***/

/* Functions for setup, diagnostics dump on a test failure & teardown. */
typedef void (*fixture_func_t)(void);
static fixture_func_t setUp_func, dump_func, tearDown_func;
void registerFixture(fixture_func_t setup, fixture_func_t dumper, fixture_func_t teardown) {
	setUp_func = setup;
	dump_func = dumper;
	tearDown_func = teardown;
}

void setUp() { if (setUp_func) setUp_func(); }
void dumpTestContext() { if (dump_func) dump_func(); }
void tearDown() { if (tearDown_func) tearDown_func(); }

static void do_run_test(UnityTestFunction func, const char* name, int line_num) {
#ifdef UNITY_USE_COMMAND_LINE_ARGS
    if (!UnityTestMatches())
        return;
#endif
	UnityDefaultTestRun(func, name, line_num);
}

int main(int argc, char** argv) {
/*
	int rc_parse = UnityParseOptions(argc,argv);
	if (rc_parse != 0)
		return rc_parse;
*/
  UnityBegin("");
  
  UnitySetTestFile("..\test_init.c");
  registerFixture(ts_SetupStackTestContext, NULL, ts_DestroyStackTestContext);
  do_run_test(testInitContext, "testInitContext", 13);
  registerFixture(NULL, NULL, NULL);
  
  UnitySetTestFile("..\test_stack.c");
  registerFixture(ts_SetupStackTestContext, NULL, ts_DestroyStackTestContext);
  do_run_test(testStackInit, "testStackInit", 17);
  do_run_test(testStackPopPush, "testStackPopPush", 27);
  do_run_test(testStackReset, "testStackReset", 40);
  do_run_test(testStackPeek, "testStackPeek", 54);
  do_run_test(testStackTosNos, "testStackTosNos", 62);
  do_run_test(testStackCanPop, "testStackCanPop", 73);
  do_run_test(testStackCanPush, "testStackCanPush", 97);
  do_run_test(testErrorPop, "testErrorPop", 118);
  do_run_test(testErrorPush, "testErrorPush", 123);
  do_run_test(testErrorTos, "testErrorTos", 130);
  do_run_test(testErrorNos, "testErrorNos", 135);
  do_run_test(testErrorPeek, "testErrorPeek", 141);
  registerFixture(NULL, NULL, NULL);
  
  UnitySetTestFile("..\test_toy_vm.c");
  registerFixture(vmInit, NULL, NULL);
  do_run_test(testVmRunNone, "testVmRunNone", 100);
  do_run_test(testVmErrorOp_stub_0, "testVmErrorOp(OP_HALT, ERR_HALT)", 118);
  do_run_test(testVmErrorOp_stub_1, "testVmErrorOp(OP_FAULT, ERR_FAULT)", 119);
  do_run_test(testInc, "testInc", 125);
  do_run_test(testInc2, "testInc2", 140);
  do_run_test(testLiteral, "testLiteral", 152);
  do_run_test(testOverrun1, "testOverrun1", 166);
  do_run_test(testOverrun2, "testOverrun2", 179);
  registerFixture(NULL, NULL, NULL);

  return UnityEnd();
}

/*

*/
