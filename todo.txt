TODO: Change all typedefs ending in _t as these are reserved. All these years and I never knew. 