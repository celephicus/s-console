/* This file is autogenerated by grm -- do not edit. */

#ifndef UNITY_INCLUDE_CONFIG_H
#error "Must define UNITY_INCLUDE_CONFIG_H."
#endif

/*** Standard includes. ***/
#include <stdint.h>
#include <stdbool.h>
#include <string.h>
#include <stdlib.h>

#include "unity.h"


/*** Stuff copied from test files (should be #include's, declarations & macros only) ***/
#define SCONSOLE_WANT_INTERNAL_DEFS
#include "sconsole.h"
enum { // Error codes...
	FAULT_OK, 		// No fault.
	FAULT_MEM,		// Access out of memory space. 
	FAULT_BAD_OPCODE,	// Illegal opcode.
	FAULT_BAD_IP,		// IP outside of memory space.
	FAULT_USER		// User fault codes from here.
};

enum { // Instructions...
	OP_FAULT,	// Sets fault from next value in instruction stream.
	OP_INC,		// Increments val.
	OP_LIT,		// Loads next value in instruction stream into val.
	OP_LOAD,	// Load val from address in val.
};

/*** External test functions scraped from test files. ***/
void testHeapRamByte(sc_cell_t addr);
void testHeapRamByteBadRead();
void testHeapRamByteBadWrite();
void testHeapRamCell(sc_cell_t addr);
void testHeapRamCellBadRead();
void testHeapRamCellBadWrite();
void testInitContext(void);
void testR_StackInit(void);
void testR_StackPopPush(void);
void testR_StackReset(void);
void testR_StackPeek(void);
void testR_StackTosNos(void);
void testR_StackCanPop(void);
void testR_StackCanPush(void);
void testR_ErrorPop(void);
void testR_ErrorPush(void);
void testR_ErrorTos(void);
void testR_ErrorNos(void);
void testR_ErrorPeek(void);
void testVmRunNone();
void testVmFaultOp();
void testInc();
void testInc2();
void testLiteral();
void testLoad();
void testLoadBad();
void testOverrun1();
void testOverrun2();
void testBadOpcode();
void testU_StackInit(void);
void testU_StackPopPush(void);
void testU_StackReset(void);
void testU_StackPeek(void);
void testU_StackTosNos(void);
void testU_StackCanPop(void);
void testU_StackCanPush(void);
void testU_ErrorPop(void);
void testU_ErrorPush(void);
void testU_ErrorTos(void);
void testU_ErrorNos(void);
void testU_ErrorPeek(void);

/*** Fixture & dump functions from test files. ***/
void ts_SetupStackTestContext(void);
void ts_DestroyStackTestContext(void);
void vmInit(void);

/* Declare test stubs. */
static void testHeapRamByte_stub_0(void) { testHeapRamByte(0); }
static void testHeapRamByte_stub_1(void) { testHeapRamByte(SC_HEAP_SIZE-1); }
static void testHeapRamCell_stub_2(void) { testHeapRamCell(0); }
static void testHeapRamCell_stub_3(void) { testHeapRamCell(SC_HEAP_SIZE-sizeof(sc_cell_t)); }

/*** Extra Unity support. ***/

/* Functions for setup, diagnostics dump on a test failure & teardown. */
typedef void (*fixture_func_t)(void);
static fixture_func_t setUp_func, dump_func, tearDown_func;
void registerFixture(fixture_func_t setup, fixture_func_t dumper, fixture_func_t teardown) {
	setUp_func = setup;
	dump_func = dumper;
	tearDown_func = teardown;
}

void setUp() { if (setUp_func) setUp_func(); }
void dumpTestContext() { if (dump_func) dump_func(); }
void tearDown() { if (tearDown_func) tearDown_func(); }

static void do_run_test(UnityTestFunction func, const char* name, int line_num) {
#ifdef UNITY_USE_COMMAND_LINE_ARGS
    if (!UnityTestMatches())
        return;
#endif
	UnityDefaultTestRun(func, name, line_num);
}

int main(int argc, char** argv) {
/*
	int rc_parse = UnityParseOptions(argc,argv);
	if (rc_parse != 0)
		return rc_parse;
*/
  UnityBegin("");
  
  UnitySetTestFile("..\test_helpers.c");
  registerFixture(ts_SetupStackTestContext, NULL, ts_DestroyStackTestContext);
  do_run_test(testHeapRamByte_stub_0, "testHeapRamByte(0)", 22);
  do_run_test(testHeapRamByte_stub_1, "testHeapRamByte(SC_HEAP_SIZE-1)", 23);
  do_run_test(testHeapRamByteBadRead, "testHeapRamByteBadRead", 25);
  do_run_test(testHeapRamByteBadWrite, "testHeapRamByteBadWrite", 30);
  do_run_test(testHeapRamCell_stub_2, "testHeapRamCell(0)", 43);
  do_run_test(testHeapRamCell_stub_3, "testHeapRamCell(SC_HEAP_SIZE-sizeof(sc_cell_t))", 45);
  do_run_test(testHeapRamCellBadRead, "testHeapRamCellBadRead", 47);
  do_run_test(testHeapRamCellBadWrite, "testHeapRamCellBadWrite", 52);
  registerFixture(NULL, NULL, NULL);
  
  UnitySetTestFile("..\test_init.c");
  registerFixture(ts_SetupStackTestContext, NULL, ts_DestroyStackTestContext);
  do_run_test(testInitContext, "testInitContext", 13);
  registerFixture(NULL, NULL, NULL);
  
  UnitySetTestFile("..\test_r_stack.c");
  registerFixture(ts_SetupStackTestContext, NULL, ts_DestroyStackTestContext);
  do_run_test(testR_StackInit, "testR_StackInit", 13);
  do_run_test(testR_StackPopPush, "testR_StackPopPush", 23);
  do_run_test(testR_StackReset, "testR_StackReset", 36);
  do_run_test(testR_StackPeek, "testR_StackPeek", 50);
  do_run_test(testR_StackTosNos, "testR_StackTosNos", 58);
  do_run_test(testR_StackCanPop, "testR_StackCanPop", 69);
  do_run_test(testR_StackCanPush, "testR_StackCanPush", 93);
  do_run_test(testR_ErrorPop, "testR_ErrorPop", 114);
  do_run_test(testR_ErrorPush, "testR_ErrorPush", 119);
  do_run_test(testR_ErrorTos, "testR_ErrorTos", 126);
  do_run_test(testR_ErrorNos, "testR_ErrorNos", 131);
  do_run_test(testR_ErrorPeek, "testR_ErrorPeek", 137);
  registerFixture(NULL, NULL, NULL);
  
  UnitySetTestFile("..\test_toy_vm.c");
  registerFixture(vmInit, NULL, NULL);
  do_run_test(testVmRunNone, "testVmRunNone", 100);
  do_run_test(testVmFaultOp, "testVmFaultOp", 106);
  do_run_test(testInc, "testInc", 123);
  do_run_test(testInc2, "testInc2", 138);
  do_run_test(testLiteral, "testLiteral", 149);
  do_run_test(testLoad, "testLoad", 161);
  do_run_test(testLoadBad, "testLoadBad", 169);
  do_run_test(testOverrun1, "testOverrun1", 175);
  do_run_test(testOverrun2, "testOverrun2", 188);
  do_run_test(testBadOpcode, "testBadOpcode", 197);
  registerFixture(NULL, NULL, NULL);
  
  UnitySetTestFile("..\test_u_stack.c");
  registerFixture(ts_SetupStackTestContext, NULL, ts_DestroyStackTestContext);
  do_run_test(testU_StackInit, "testU_StackInit", 13);
  do_run_test(testU_StackPopPush, "testU_StackPopPush", 23);
  do_run_test(testU_StackReset, "testU_StackReset", 36);
  do_run_test(testU_StackPeek, "testU_StackPeek", 50);
  do_run_test(testU_StackTosNos, "testU_StackTosNos", 58);
  do_run_test(testU_StackCanPop, "testU_StackCanPop", 69);
  do_run_test(testU_StackCanPush, "testU_StackCanPush", 93);
  do_run_test(testU_ErrorPop, "testU_ErrorPop", 114);
  do_run_test(testU_ErrorPush, "testU_ErrorPush", 119);
  do_run_test(testU_ErrorTos, "testU_ErrorTos", 126);
  do_run_test(testU_ErrorNos, "testU_ErrorNos", 131);
  do_run_test(testU_ErrorPeek, "testU_ErrorPeek", 137);
  registerFixture(NULL, NULL, NULL);

  return UnityEnd();
}

/*

*/
